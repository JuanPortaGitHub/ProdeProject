// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                 Int                  @id @default(autoincrement())
  mail               String               @unique
  name               String
  apellido           String
  password           String
  grupos             Grupo[]
  Prode_Usuario      Prode_Usuario[]
  Usuarios_Por_Grupo Usuarios_Por_Grupo[]
  createdAt          DateTime             @default(now()) @db.Timestamptz(3)
  updatedAt          DateTime             @updatedAt @db.Timestamptz(3)
}

model Grupo {
  id                 Int                  @id @default(autoincrement())
  usuarios_en_grupo  User[]
  nombre             String               @unique
  imagen             String?
  clave_grupo        String
  Usuarios_Por_Grupo Usuarios_Por_Grupo[]
  createdAt          DateTime             @default(now()) @db.Timestamptz(3)
  updatedAt          DateTime             @updatedAt @db.Timestamptz(3)
}

model Usuarios_Por_Grupo {
  id                           Int           @id @default(autoincrement())
  usuario                      User          @relation(fields: [userId], references: [id])
  grupo                        Grupo         @relation(fields: [grupoId], references: [id])
  nombre                       String        @unique
  admin                        Boolean       @default(false)
  userId                       Int
  grupoId                      Int
  Prode                        Prode_Usuario @relation(fields: [prode_UsuarioInfo_PartidosId], references: [info_PartidosId])
  prode_UsuarioInfo_PartidosId Int
  createdAt                    DateTime      @default(now()) @db.Timestamptz(3)
  updatedAt                    DateTime      @updatedAt @db.Timestamptz(3)
}

model Prode_Usuario {
  Usuario            User                 @relation(fields: [userId], references: [id])
  Partido            Info_Partidos        @relation(fields: [info_PartidosId], references: [id])
  Goles_Local        String
  Goles_Visitante    String
  Ganador            String
  Tiempo_Extra       Boolean              @default(false)
  Penales            Boolean              @default(false)
  Puntos             Int
  info_PartidosId    Int                  @id
  userId             Int
  Usuarios_Por_Grupo Usuarios_Por_Grupo[]
  createdAt          DateTime             @default(now()) @db.Timestamptz(3)
  updatedAt          DateTime             @updatedAt @db.Timestamptz(3)
}

model Info_Partidos {
  id                           Int                        @id @default(autoincrement())
  Equipos                      Equipos[]
  DiaHora                      DateTime
  Lugar                        String
  Resultado                    Resultados_Reales_Partidos @relation(fields: [resultados_Reales_PartidosId], references: [id])
  resultados_Reales_PartidosId Int                        @unique
  Prode_Usuario                Prode_Usuario[]
  createdAt                    DateTime                   @default(now()) @db.Timestamptz(3)
  updatedAt                    DateTime                   @updatedAt @db.Timestamptz(3)
}

model Equipos {
  id              Int            @id @default(autoincrement())
  nombre_equipo   String
  Info_Partidos   Info_Partidos? @relation(fields: [info_PartidosId], references: [id])
  info_PartidosId Int?
  createdAt       DateTime       @default(now()) @db.Timestamptz(3)
  updatedAt       DateTime       @updatedAt @db.Timestamptz(3)
}

model Resultados_Reales_Partidos {
  id              Int            @id @default(autoincrement())
  Goles_Local     String
  Goles_Visitante String
  Info_Partidos   Info_Partidos?
  createdAt       DateTime       @default(now()) @db.Timestamptz(3)
  updatedAt       DateTime       @updatedAt @db.Timestamptz(3)
}
